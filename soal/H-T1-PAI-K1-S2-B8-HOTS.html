<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis PAI Kelas 1 - Berterima Kasih & Disiplin</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');

        :root {
            --primary: #4A90E2;
            --secondary: #F39C12;
            --correct: #2ECC71;
            --wrong: #E74C3C;
            --bg-color: #E0F7FA;
            --text-dark: #2C3E50;
            --card-bg: #FFFFFF;
        }

        body {
            font-family: 'Nunito', sans-serif;
            background-color: var(--bg-color);
            background-image: radial-gradient(#B2EBF2 20%, transparent 20%),
                              radial-gradient(#B2EBF2 20%, transparent 20%);
            background-position: 0 0, 25px 25px;
            background-size: 50px 50px;
            color: var(--text-dark);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        .header-kode {
            background-color: var(--primary);
            color: white;
            text-align: center;
            padding: 10px;
            font-weight: 900;
            font-size: 1.2rem;
            letter-spacing: 2px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .container {
            max-width: 800px;
            margin: 30px auto;
            background: var(--card-bg);
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .decoration {
            position: absolute;
            font-size: 3rem;
            opacity: 0.2;
            z-index: 0;
        }
        .dec-1 { top: 10px; left: 10px; }
        .dec-2 { bottom: 20px; right: 20px; }
        
        .content {
            position: relative;
            z-index: 1;
        }

        h1, h2, h3 { text-align: center; color: var(--primary); }

        .form-group { margin-bottom: 20px; }
        label { font-weight: bold; display: block; margin-bottom: 5px; }
        input {
            width: 100%;
            padding: 12px;
            border: 2px solid var(--primary);
            border-radius: 10px;
            font-size: 1rem;
            font-family: inherit;
            box-sizing: border-box;
        }
        
        button {
            background-color: var(--secondary);
            color: white;
            border: none;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            box-shadow: 0 4px 6px rgba(0,0,0,0.15);
        }
        button:hover { transform: translateY(-3px); }
        button:disabled { background-color: #BDC3C7; cursor: not-allowed; transform: none; box-shadow: none; }
        
        .btn-block { width: 100%; margin-top: 10px; }
        
        /* Tombol Home Baru */
        .btn-home {
            background-color: #7F8C8D;
            margin-top: 15px;
            text-decoration: none;
            display: block;
            text-align: center;
            color: white;
            padding: 12px 25px;
            font-size: 1.1rem;
            font-weight: bold;
            border-radius: 10px;
        }

        .history-box {
            margin-top: 30px;
            background: #FFF9C4;
            padding: 15px;
            border-radius: 10px;
            border: 2px dashed var(--secondary);
            max-height: 250px;
            overflow-y: auto;
        }
        .history-item {
            padding: 12px;
            border-bottom: 1px solid #E0E0E0;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: #FFFFFF;
            margin-bottom: 8px;
            border-radius: 8px;
        }
        .history-score { font-size: 1.3rem; font-weight: 900; color: var(--primary); background: #EBF5FB; padding: 5px 15px; border-radius: 20px; }

        #quiz-screen, #result-screen { display: none; }
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            font-weight: bold;
            background: #E8F8F5;
            padding: 10px 20px;
            border-radius: 10px;
        }

        .question-box { font-size: 1.3rem; font-weight: 700; margin-bottom: 20px; }
        
        .option-btn {
            display: block;
            width: 100%;
            text-align: left;
            background: #F8F9F9;
            color: var(--text-dark);
            border: 2px solid #D5DBDB;
            margin-bottom: 12px;
            padding: 15px;
            font-size: 1.1rem;
            border-radius: 12px;
            transition: all 0.3s ease;
        }
        .option-btn:hover:not(:disabled) { background: #EBF5FB; border-color: var(--primary); }
        .option-btn.correct { background-color: var(--correct); color: white; border-color: var(--correct); }
        .option-btn.wrong { background-color: var(--wrong); color: white; border-color: var(--wrong); }

        .explanation {
            background-color: #D4EDDA;
            color: #155724;
            padding: 15px;
            border-radius: 10px;
            margin-top: 20px;
            border-left: 5px solid #28A745;
            display: none;
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 25px;
        }

        footer {
            background-color: #1a1a1a;
            color: #ecf0f1;
            text-align: center;
            padding: 12px 20px;
            font-size: 0.85rem;
            margin-top: auto;
            border-top: 2px solid var(--secondary);
            white-space: nowrap;
            overflow-x: auto;
        }
        footer a { color: var(--secondary); text-decoration: none; }

        .score-display {
            font-size: 4rem;
            font-weight: 900;
            color: var(--primary);
            text-align: center;
            margin: 20px 0;
        }
    </style>
</head>
<body>

    <div class="header-kode">Kode: PAI-K1-S2-B8-HOTS</div>

    <div class="container">
        <span class="decoration dec-1">üåü</span>
        <span class="decoration dec-2">üìö</span>
        <div class="content">
            
            <div id="login-screen">
                <h1>Selamat Datang di Kuis Seru!</h1>
                <p style="text-align:center;">Bab: Aku Suka Berterima Kasih dan Disiplin</p>
                
                <div class="form-group">
                    <label>Nama Lengkap:</label>
                    <input type="text" id="user-name" placeholder="Masukkan nama kamu...">
                </div>
                <div class="form-group">
                    <label>Kelas:</label>
                    <input type="text" id="user-class" placeholder="Contoh: 1A">
                </div>
                <button class="btn-block" onclick="startQuiz()">Mulai Kuis Sekarang!</button>
                
                <a href="../index.html" class="btn-home">üè† Kembali ke Beranda</a>

                <div class="history-box">
                    <h3>üèÜ Riwayat Pencapaian Skor</h3>
                    <div id="history-list">Belum ada riwayat. Ayo mainkan!</div>
                </div>
            </div>

            <div id="quiz-screen">
                <div class="quiz-header">
                    <div>Soal: <span id="q-current">1</span>/25</div>
                    <div>Skor: <span id="score-display">0</span></div>
                </div>
                <div class="question-box" id="question-text">Memuat soal...</div>
                <div id="options-container"></div>
                <div class="explanation" id="explanation-box"></div>
                <div class="nav-buttons">
                    <button id="btn-prev" onclick="prevQuestion()" disabled>‚¨ÖÔ∏è Sebelumnya</button>
                    <button id="btn-next" onclick="nextQuestion()" disabled>Selanjutnya ‚û°Ô∏è</button>
                </div>
            </div>

            <div id="result-screen">
                <h1>Hore, Kuis Selesai! üéâ</h1>
                <h2>Nilai Akhir Kamu:</h2>
                <div class="score-display" id="final-score">0</div>
                <h3 id="final-message"></h3>
                <button class="btn-block" onclick="restartToHome()">Main Lagi</button>
            </div>

        </div>
    </div>

    <footer>
        @<span id="year"></span>, Oleh: Dwi Endrasto | Produk ini asli jika didapatkan melalui <a href="https://lynk.id/smartbanksoal" target="_blank">https://lynk.id/smartbanksoal</a>
    </footer>

    <script>
        // Kunci unik untuk file ini agar tidak bentrok dengan file lain
        const STORAGE_KEY = 'quiz_pai_k1_s2_b8_history';

        document.getElementById('year').innerText = new Date().getFullYear();

        const quizData = [
            {
                q: "1. Siti ditolong teman saat jatuh. Sikap Siti sebaiknya adalah...",
                opts: [
                    { text: "Mengucapkan terima kasih dengan ikhlas", isCorrect: true },
                    { text: "Langsung pulang sambil menangis keras", isCorrect: false },
                    { text: "Meminta teman untuk menggendong dirinya", isCorrect: false }
                ],
                exp: "Pembahasan: Jika kita ditolong oleh orang lain, kita wajib mengucapkan terima kasih sebagai bentuk rasa syukur dan menghargai kebaikan mereka."
            },
            {
                q: "2. Budi diberi kue oleh pamannya. Budi seharusnya melakukan hal...",
                opts: [
                    { text: "Menerima kue sambil diam saja", isCorrect: false },
                    { text: "Mengucapkan terima kasih kepada paman", isCorrect: true },
                    { text: "Langsung memakan kue dengan cepat", isCorrect: false }
                ],
                exp: "Pembahasan: Menerima pemberian orang lain harus disertai dengan ucapan terima kasih yang sopan."
            },
            {
                q: "3. Kamu meminjam buku milik temanmu. Setelah selesai dibaca sebaiknya...",
                opts: [
                    { text: "Mengembalikan buku sambil bilang makasih", isCorrect: true },
                    { text: "Menyimpan buku di dalam lemari", isCorrect: false },
                    { text: "Membuang buku ke tempat sampah", isCorrect: false }
                ],
                exp: "Pembahasan: Barang pinjaman harus dikembalikan tepat waktu dan kita harus berterima kasih karena sudah diizinkan meminjam."
            },
            {
                q: "4. Temanmu meminjamkan pensil saat ujian. Yang kamu lakukan adalah...",
                opts: [
                    { text: "Mengucapkan terima kasih setelah ujian", isCorrect: true },
                    { text: "Membawa pulang pensil milik teman", isCorrect: false },
                    { text: "Mematahkan pensil itu menjadi dua", isCorrect: false }
                ],
                exp: "Pembahasan: Berterima kasih setelah selesai menggunakan barang pinjaman menunjukkan sikap menghargai teman."
            },
            {
                q: "5. Ibu sudah memasak makanan kesukaanmu. Kamu menunjukkan rasa syukur...",
                opts: [
                    { text: "Makan banyak tanpa sisa sedikitpun", isCorrect: false },
                    { text: "Bilang terima kasih kepada ibu", isCorrect: true },
                    { text: "Meminta ibu memasak makanan lain", isCorrect: false }
                ],
                exp: "Pembahasan: Ibu lelah memasak, ucapan terima kasih akan membuat hati ibu sangat senang."
            },
            {
                q: "6. Ayah membelikan mainan baru untukmu. Sikap yang paling tepat...",
                opts: [
                    { text: "Menyimpan mainan itu dengan baik", isCorrect: false },
                    { text: "Berterima kasih kepada ayah tersayang", isCorrect: true },
                    { text: "Merusak mainan itu dengan sengaja", isCorrect: false }
                ],
                exp: "Pembahasan: Berterima kasih adalah respon utama saat diberi hadiah, setelah itu baru menjaga hadiah tersebut."
            },
            {
                q: "7. Cara berterima kasih kepada Allah atas nikmat sehat adalah...",
                opts: [
                    { text: "Mengucapkan alhamdulillah setelah selesai makan", isCorrect: true },
                    { text: "Bermain terus sampai lupa waktu", isCorrect: false },
                    { text: "Tidur siang sepanjang hari libur", isCorrect: false }
                ],
                exp: "Pembahasan: Kalimat Alhamdulillah adalah cara kita memuji dan berterima kasih kepada Allah SWT."
            },
            {
                q: "8. Saat kamu ditolong oleh guru karena kesulitan belajar membaca...",
                opts: [
                    { text: "Mendengarkan guru sambil tersenyum manis", isCorrect: false },
                    { text: "Mengucapkan terima kasih kepada guru", isCorrect: true },
                    { text: "Langsung lari keluar ruang kelas", isCorrect: false }
                ],
                exp: "Pembahasan: Guru yang membantu kita layak mendapatkan ucapan terima kasih yang tulus dari muridnya."
            },
            {
                q: "9. Setelah minum air yang segar di siang hari yang...",
                opts: [
                    { text: "Membaca alhamdulillah sebagai rasa syukur", isCorrect: true },
                    { text: "Membuang sisa air ke lantai", isCorrect: false },
                    { text: "Meminta es krim kepada ibu", isCorrect: false }
                ],
                exp: "Pembahasan: Minum air adalah rezeki dari Allah, mensyukurinya dengan mengucap Alhamdulillah."
            },
            {
                q: "10. Kakak membantumu mengerjakan tugas sekolah. Balasan sikap yang benar...",
                opts: [
                    { text: "Menyuruh kakak mengerjakan semua tugas", isCorrect: false },
                    { text: "Mengucapkan terima kasih pada kakak", isCorrect: true },
                    { text: "Bermain game saat kakak belajar", isCorrect: false }
                ],
                exp: "Pembahasan: Kakak sudah meluangkan waktu membantu, jadi kita wajib bilang terima kasih."
            },
            {
                q: "11. Pak satpam membantumu menyeberang jalan raya di depan sekolah...",
                opts: [
                    { text: "Berjalan cepat tanpa melihat satpam", isCorrect: false },
                    { text: "Mengucapkan terima kasih pada bapak", isCorrect: true },
                    { text: "Langsung lari menuju pintu gerbang", isCorrect: false }
                ],
                exp: "Pembahasan: Kita harus berterima kasih kepada siapapun yang menolong kita, termasuk pak satpam."
            },
            {
                q: "12. Nenek memberimu uang untuk jajan saat hari libur sekolah...",
                opts: [
                    { text: "Menyimpan uang itu di saku", isCorrect: false },
                    { text: "Memeluk nenek sambil bilang makasih", isCorrect: true },
                    { text: "Meminta tambahan uang kepada nenek", isCorrect: false }
                ],
                exp: "Pembahasan: Mengucapkan terima kasih dengan sopan membuat nenek bahagia karena pemberiannya dihargai."
            },
            {
                q: "13. Contoh anak yang disiplin mengatur waktu di rumah adalah...",
                opts: [
                    { text: "Bangun tidur tepat pada waktunya", isCorrect: true },
                    { text: "Tidur larut malam setiap hari", isCorrect: false },
                    { text: "Bermain terus sampai lupa belajar", isCorrect: false }
                ],
                exp: "Pembahasan: Bangun pagi tepat waktu menunjukkan kita bisa mendisiplinkan diri sendiri sejak bangun tidur."
            },
            {
                q: "14. Bel tanda masuk sekolah sudah berbunyi keras sekali. Kamu...",
                opts: [
                    { text: "Segera masuk ke dalam kelas", isCorrect: true },
                    { text: "Masih bermain di halaman sekolah", isCorrect: false },
                    { text: "Bersembunyi di dalam kamar mandi", isCorrect: false }
                ],
                exp: "Pembahasan: Disiplin di sekolah berarti patuh pada aturan bel sekolah dengan segera masuk kelas."
            },
            {
                q: "15. Guru memberikan tugas sekolah untuk dikumpulkan besok pagi. Kamu...",
                opts: [
                    { text: "Mengerjakan tugas pada malam hari", isCorrect: true },
                    { text: "Lupa mengerjakan karena asyik bermain", isCorrect: false },
                    { text: "Menyuruh ibu yang mengerjakan tugas", isCorrect: false }
                ],
                exp: "Pembahasan: Disiplin belajar berarti mengerjakan tugas atau PR tepat waktu tanpa disuruh-suruh."
            },
            {
                q: "16. Saat upacara bendera hari Senin di lapangan sekolah, kamu...",
                opts: [
                    { text: "Mengobrol dengan teman di barisan", isCorrect: false },
                    { text: "Berdiri tegak dengan sangat tertib", isCorrect: true },
                    { text: "Duduk karena merasa sangat lelah", isCorrect: false }
                ],
                exp: "Pembahasan: Disiplin saat upacara ditunjukkan dengan sikap sempurna dan tidak banyak bergerak atau bicara."
            },
            {
                q: "17. Guru sedang menjelaskan pelajaran di depan kelas. Sikapmu sebaiknya...",
                opts: [
                    { text: "Mendengarkan guru dengan sangat baik", isCorrect: true },
                    { text: "Bermain pesawat kertas bersama teman", isCorrect: false },
                    { text: "Tidur santai di atas meja", isCorrect: false }
                ],
                exp: "Pembahasan: Disiplin saat belajar adalah fokus mendengarkan penjelasan guru agar ilmu mudah diserap."
            },
            {
                q: "18. Sepatu sekolahmu kotor setelah dipakai bermain di lapangan tanah...",
                opts: [
                    { text: "Dibiarkan saja di depan rumah", isCorrect: false },
                    { text: "Dicuci bersih lalu dijemur rapi", isCorrect: true },
                    { text: "Dibuang ke dalam tempat sampah", isCorrect: false }
                ],
                exp: "Pembahasan: Merawat barang pribadi dengan mencucinya adalah bentuk disiplin menjaga kebersihan."
            },
            {
                q: "19. Cara menjaga kebersihan lingkungan sekolah yang sangat disiplin adalah...",
                opts: [
                    { text: "Membuang sampah pada tempat sampah", isCorrect: true },
                    { text: "Membuang sampah di laci meja", isCorrect: false },
                    { text: "Menyapu lantai hanya saat dihukum", isCorrect: false }
                ],
                exp: "Pembahasan: Membuang sampah pada tempatnya adalah aturan dasar kedisiplinan hidup bersih."
            },
            {
                q: "20. Baju seragammu basah terkena keringat setelah asyik bermain lari-larian...",
                opts: [
                    { text: "Memakai baju kotor esok harinya", isCorrect: false },
                    { text: "Menaruh baju di keranjang cucian", isCorrect: true },
                    { text: "Membuang baju itu ke sungai", isCorrect: false }
                ],
                exp: "Pembahasan: Anak yang disiplin tahu meletakkan pakaian kotor di tempat yang semestinya, bukan sembarangan."
            },
            {
                q: "21. Buku pelajaran setelah selesai dibaca untuk belajar di malam...",
                opts: [
                    { text: "Dibiarkan berantakan di atas kasur", isCorrect: false },
                    { text: "Disusun rapi di rak buku", isCorrect: true },
                    { text: "Digunting untuk mainan lipat kertas", isCorrect: false }
                ],
                exp: "Pembahasan: Mengembalikan barang ke tempat asalnya adalah ciri anak yang teratur dan disiplin."
            },
            {
                q: "22. Sikap disiplin di pagi hari sebelum berangkat sekolah adalah...",
                opts: [
                    { text: "Mandi pagi agar badan segar", isCorrect: true },
                    { text: "Kembali tidur setelah dimatikan alarm", isCorrect: false },
                    { text: "Menangis karena masih merasa mengantuk", isCorrect: false }
                ],
                exp: "Pembahasan: Mandi pagi secara rutin adalah wujud disiplin menjaga kebersihan dan kesiapan tubuh."
            },
            {
                q: "23. Mainan berserakan di lantai ruang tamu rumahmu. Kamu harus...",
                opts: [
                    { text: "Merapikan mainan ke dalam kotak", isCorrect: true },
                    { text: "Membiarkan ibu yang membereskan mainan", isCorrect: false },
                    { text: "Pura pura tidak melihat mainan", isCorrect: false }
                ],
                exp: "Pembahasan: Bertanggung jawab merapikan kembali mainan sendiri adalah wujud anak yang disiplin di rumah."
            },
            {
                q: "24. Sebelum berangkat menuju ke sekolah di pagi hari sebaiknya...",
                opts: [
                    { text: "Langsung pergi tanpa pamit orangtua", isCorrect: false },
                    { text: "Menangis meminta uang saku lebih", isCorrect: false },
                    { text: "Berpamitan kepada ayah dan ibu", isCorrect: true }
                ],
                exp: "Pembahasan: Membiasakan pamit dan cium tangan orangtua adalah aturan kedisiplinan dan adab anak salih."
            },
            {
                q: "25. Kamu tidak sengaja memecahkan gelas milik ibu di dapur...",
                opts: [
                    { text: "Meminta maaf dan berkata jujur", isCorrect: true },
                    { text: "Bersembunyi di bawah meja makan", isCorrect: false },
                    { text: "Menuduh adik yang memecahkan gelas", isCorrect: false }
                ],
                exp: "Pembahasan: Disiplin moral berarti berani bertanggung jawab, berkata jujur, dan meminta maaf jika melakukan kesalahan."
            }
        ];

        let currentUser = "";
        let currentClass = "";
        let currentQIndex = 0;
        let score = 0;
        let userAnswers = [];

        window.onload = loadHistory;

        function loadHistory() {
            const historyData = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
            const historyList = document.getElementById('history-list');
            if (historyData.length > 0) {
                historyList.innerHTML = '';
                historyData.reverse().forEach(data => {
                    const dateObj = new Date(data.date);
                    const timeString = dateObj.toLocaleDateString('id-ID') + ' - ' + dateObj.toLocaleTimeString('id-ID', {hour: '2-digit', minute:'2-digit'});
                    const div = document.createElement('div');
                    div.className = 'history-item';
                    div.innerHTML = `
                        <div class="history-info">
                            <span class="history-name">${data.name}</span> <span style="font-size:0.8rem">(${data.kelas})</span>
                            <span style="display:block; font-size:0.7rem; color:gray">üïí ${timeString}</span>
                        </div>
                        <div class="history-score">${data.score}</div>
                    `;
                    historyList.appendChild(div);
                });
            }
        }

        function startQuiz() {
            const name = document.getElementById('user-name').value.trim();
            const kelas = document.getElementById('user-class').value.trim();
            if (!name || !kelas) { alert("Isi nama dan kelas dulu!"); return; }
            currentUser = name; currentClass = kelas;
            currentQIndex = 0; score = 0;
            userAnswers = new Array(quizData.length).fill(null);
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('quiz-screen').style.display = 'block';
            loadQuestion();
        }

        function loadQuestion() {
            const qData = quizData[currentQIndex];
            document.getElementById('q-current').innerText = currentQIndex + 1;
            document.getElementById('score-display').innerText = score;
            document.getElementById('question-text').innerText = qData.q;
            const container = document.getElementById('options-container');
            container.innerHTML = '';
            document.getElementById('explanation-box').style.display = 'none';
            document.getElementById('explanation-box').innerText = qData.exp;
            document.getElementById('btn-prev').disabled = (currentQIndex === 0);
            const btnNext = document.getElementById('btn-next');
            btnNext.innerText = (currentQIndex === quizData.length - 1) ? "Selesai üèÅ" : "Selanjutnya ‚û°Ô∏è";
            btnNext.disabled = true;

            let opts = userAnswers[currentQIndex] ? userAnswers[currentQIndex].shuffled : shuffle([...qData.opts]);
            opts.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.innerText = opt.text;
                if (userAnswers[currentQIndex]) {
                    btn.disabled = true;
                    if (opt.text === userAnswers[currentQIndex].selected) btn.classList.add(opt.isCorrect ? 'correct' : 'wrong');
                    if (opt.isCorrect) btn.style.borderColor = "var(--correct)";
                    btnNext.disabled = false;
                    document.getElementById('explanation-box').style.display = 'block';
                } else {
                    btn.onclick = () => {
                        const isCorrect = opt.isCorrect;
                        if (isCorrect) { btn.classList.add('correct'); score += 4; }
                        else { btn.classList.add('wrong'); }
                        userAnswers[currentQIndex] = { selected: opt.text, shuffled: opts };
                        document.querySelectorAll('.option-btn').forEach(b => b.disabled = true);
                        document.getElementById('explanation-box').style.display = 'block';
                        btnNext.disabled = false;
                        document.getElementById('score-display').innerText = score;
                    };
                }
                container.appendChild(btn);
            });
        }

        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function nextQuestion() { (currentQIndex < quizData.length - 1) ? (currentQIndex++, loadQuestion()) : endQuiz(); }
        function prevQuestion() { if (currentQIndex > 0) { currentQIndex--; loadQuestion(); } }

        function endQuiz() {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('result-screen').style.display = 'block';
            document.getElementById('final-score').innerText = score;
            let history = JSON.parse(localStorage.getItem(STORAGE_KEY)) || [];
            history.push({ name: currentUser, kelas: currentClass, score: score, date: new Date().toISOString() });
            localStorage.setItem(STORAGE_KEY, JSON.stringify(history));
        }

        function restartToHome() {
            document.getElementById('result-screen').style.display = 'none';
            document.getElementById('login-screen').style.display = 'block';
            loadHistory();
        }
    </script>
</body>
</html>