<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kuis Interaktif PJOK</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;700;900&display=swap');

        :root {
            --primary: #FF6B6B;
            --secondary: #4ECDC4;
            --accent: #FFE66D;
            --bg: #F7F9F9;
            --text: #2D3436;
            --correct: #2ECC71;
            --wrong: #E74C3C;
        }

        * {
            box-sizing: border-box;
            font-family: 'Nunito', sans-serif;
            margin: 0;
            padding: 0;
        }

        body {
            background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%);
            color: var(--text);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            background: rgba(255, 255, 255, 0.95);
            width: 90%;
            max-width: 800px;
            margin: 30px auto;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.1);
            padding: 30px;
            position: relative;
            flex: 1;
        }

        .kode-soal {
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            display: inline-block;
            margin-bottom: 20px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            text-align: center;
        }

        h1, h2 {
            text-align: center;
            color: var(--primary);
            margin-bottom: 20px;
        }

        /* TAMPILAN LOGIN & HISTORY */
        .form-group {
            margin-bottom: 15px;
        }

        .form-group label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .form-group input {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 16px;
            outline: none;
            transition: border-color 0.3s;
        }

        .form-group input:focus {
            border-color: var(--secondary);
        }

        .btn-mulai {
            background: var(--secondary);
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 10px;
            cursor: pointer;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(78, 205, 196, 0.4);
        }

        .btn-mulai:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(78, 205, 196, 0.6);
        }

        .btn-home {
            display: block;
            background: #2C3E50;
            color: white;
            text-align: center;
            text-decoration: none;
            padding: 15px 30px;
            font-size: 18px;
            font-weight: bold;
            border-radius: 10px;
            margin-top: 15px;
            width: 100%;
            transition: transform 0.2s, box-shadow 0.2s;
            box-shadow: 0 5px 15px rgba(44, 62, 80, 0.4);
        }

        .btn-home:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 20px rgba(44, 62, 80, 0.6);
        }

        .history-container {
            margin-top: 40px;
            background: var(--bg);
            padding: 20px;
            border-radius: 15px;
            border: 2px dashed var(--secondary);
            max-height: 250px;
            overflow-y: auto;
        }

        .history-table {
            width: 100%;
            border-collapse: collapse;
            font-size: 14px;
        }

        .history-table th, .history-table td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        .history-table th {
            background: var(--accent);
            color: #333;
        }

        /* TAMPILAN KUIS */
        .quiz-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--accent);
            padding: 15px;
            border-radius: 15px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .question-text {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 20px;
            line-height: 1.5;
            background: white;
            padding: 20px;
            border-radius: 15px;
            border-left: 5px solid var(--secondary);
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .options-container {
            display: grid;
            gap: 15px;
        }

        .option-btn {
            background: white;
            border: 2px solid #ddd;
            padding: 15px;
            border-radius: 10px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            text-align: left;
            transition: all 0.3s ease;
        }

        .option-btn:hover:not(:disabled) {
            border-color: var(--secondary);
            background: #f0fbfb;
        }

        .option-btn.correct {
            background: var(--correct);
            color: white;
            border-color: var(--correct);
        }

        .option-btn.wrong {
            background: var(--wrong);
            color: white;
            border-color: var(--wrong);
        }

        .option-btn:disabled {
            cursor: not-allowed;
        }

        .pembahasan {
            margin-top: 20px;
            padding: 15px;
            background: #e8f8f5;
            border-left: 5px solid var(--correct);
            border-radius: 10px;
            font-size: 15px;
            display: none;
            animation: fadeIn 0.5s;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 30px;
        }

        .nav-btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: bold;
            cursor: pointer;
            transition: opacity 0.3s;
        }

        .nav-btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* TAMPILAN HASIL */
        .result-container {
            text-align: center;
            padding: 40px 20px;
        }

        .score-display {
            font-size: 80px;
            font-weight: 900;
            color: var(--correct);
            margin: 20px 0;
            text-shadow: 2px 2px 0px rgba(0,0,0,0.1);
        }

        /* FOOTER */
        footer {
            width: 100%;
            background: #1A1A1A;
            color: #ecf0f1;
            text-align: center;
            padding: 15px 20px;
            font-size: 13px;
            margin-top: auto;
            letter-spacing: 0.5px;
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
            font-weight: bold;
            margin-left: 5px;
        }

        footer a:hover {
            text-decoration: underline;
        }

        .hidden { display: none !important; }
        .text-center { text-align: center; }
    </style>
</head>
<body>

    <div class="container" id="login-screen">
        <div class="text-center">
            <div class="kode-soal">PJOK-K1-S2-B4-HOTS</div>
        </div>
        <h1>Mari Bermain Bersama!</h1>
        <p class="text-center" style="margin-bottom: 20px;">Silakan masukkan data diri untuk memulai kuis.</p>
        
        <div class="form-group">
            <label for="namaLengkap">Nama Lengkap:</label>
            <input type="text" id="namaLengkap" placeholder="Ketik namamu di sini..." required>
        </div>
        <div class="form-group">
            <label for="kelas">Kelas:</label>
            <input type="text" id="kelas" placeholder="Misal: 1A" required>
        </div>
        
        <button class="btn-mulai" onclick="startQuiz()">Mulai Kuis</button>
        <a href="../index.html" class="btn-home">Kembali ke Home</a>

        <div class="history-container">
            <h3 style="margin-bottom: 10px; color: var(--text);">Riwayat Pengerjaan Kuis</h3>
            <table class="history-table">
                <thead>
                    <tr>
                        <th>Waktu</th>
                        <th>Nama</th>
                        <th>Kelas</th>
                        <th>Skor</th>
                    </tr>
                </thead>
                <tbody id="history-body">
                    </tbody>
            </table>
        </div>
    </div>

    <div class="container hidden" id="quiz-screen">
        <div class="text-center">
            <div class="kode-soal">PJOK-K1-S2-B4-HOTS</div>
        </div>
        
        <div class="quiz-header">
            <span id="q-counter">Soal 1 / 25</span>
            <span>Skor Sementara: <span id="current-score" style="color:var(--wrong); font-size:18px;">0</span></span>
        </div>

        <div class="question-text" id="question-text">
            Pertanyaan akan muncul di sini...
        </div>

        <div class="options-container" id="options-container">
            </div>

        <div class="pembahasan" id="pembahasan-container">
            <strong>Pembahasan:</strong> <span id="pembahasan-text"></span>
        </div>

        <div class="nav-buttons">
            <button class="nav-btn" id="btn-prev" onclick="prevQuestion()">&#8592; Sebelumnya</button>
            <button class="nav-btn" id="btn-next" onclick="nextQuestion()" disabled>Selanjutnya &#8594;</button>
        </div>
    </div>

    <div class="container hidden" id="result-screen">
        <div class="text-center">
            <div class="kode-soal">PJOK-K1-S2-B4-HOTS</div>
        </div>
        <div class="result-container">
            <h2>Hore! Kuis Selesai</h2>
            <p id="result-name" style="font-size: 20px; font-weight: bold;"></p>
            <p>Skor Akhir Kamu:</p>
            <div class="score-display" id="final-score">100</div>
            <p style="margin-bottom: 30px;">Kerja yang sangat bagus!</p>
            <button class="btn-mulai" onclick="location.reload()">Kembali ke Halaman Awal</button>
        </div>
    </div>

    <footer>
        @ 2026 Oleh: Dwi Endrasto | Produk ini asli jika didapatkan/dibeli melalui <a href="https://lynk.id/smartbanksoal" target="_blank">https://lynk.id/smartbanksoal</a>
    </footer>

    <script>
        // Data Soal
        const questionsData = [
            // Menaati Aturan
            { q: "Saat bermain kejar-kejaran, Edo tidak sengaja menyenggol Budi sampai jatuh. Apa yang harus Edo lakukan?", options: ["Segera minta maaf", "Lari sangat cepat", "Diam lihat saja"], answer: "Segera minta maaf", pembahasan: "Kita harus meminta maaf jika berbuat salah agar permainan tetap damai dan teman tidak marah." },
            { q: "Peluit guru sudah berbunyi panjang tanda permainan selesai. Apa yang harus kamu lakukan?", options: ["Terus lanjut main", "Segera kumpul baris", "Sembunyi di kelas"], answer: "Segera kumpul baris", pembahasan: "Bunyi peluit panjang adalah tanda kesepakatan untuk berhenti bermain dan mendengarkan instruksi guru." },
            { q: "Kamu melihat temanmu melanggar garis batas lapangan saat lomba lari. Sikapmu sebaiknya?", options: ["Marah dan memukul", "Lapor pada guru", "Ikut langgar garis"], answer: "Lapor pada guru", pembahasan: "Melaporkan pelanggaran kepada guru adalah tindakan jujur dan sangat menghargai aturan bermain." },
            { q: "Dalam permainan gobak sodor, ada aturan batas garis. Jika kamu melewatinya, maka...", options: ["Kamu langsung menang", "Kamu harus keluar", "Kamu dapat hadiah"], answer: "Kamu harus keluar", pembahasan: "Keluar lapangan berarti melanggar batas area permainan, sehingga dinyatakan mati atau berganti giliran jaga." },
            { q: "Aturan dibuat agar permainan berjalan dengan lancar dan aman. Jika kita tidak patuh, maka...", options: ["Teman jadi senang", "Permainan jadi kacau", "Permainan makin seru"], answer: "Permainan jadi kacau", pembahasan: "Tanpa aturan yang ditaati, permainan tidak akan berjalan dengan adil, rapi, dan bisa berbahaya." },
            
            // Bergiliran Secara Adil
            { q: "Hanya ada satu bola voli, sedangkan yang ingin main sangat banyak. Cara terbaiknya adalah...", options: ["Rebutan ambil bola", "Antre tunggu giliran", "Menangis minta bola"], answer: "Antre tunggu giliran", pembahasan: "Mengantre mengajarkan kita bersabar dan bersikap adil kepada semua teman yang ingin ikut." },
            { q: "Kamu sedang asyik main ayunan, tiba-tiba temanmu datang ingin ikut main. Sikapmu...", options: ["Marah dan usir", "Turun beri giliran", "Terus main sendiri"], answer: "Turun beri giliran", pembahasan: "Kita harus mau berbagi dan bergantian memakai fasilitas agar semua bisa merasakan kebahagiaan yang sama." },
            { q: "Permainan estafet bola membutuhkan kerja sama tim. Jika giliranmu belum tiba, kamu harus...", options: ["Tetap di tempat", "Lari duluan saja", "Duduk main pasir"], answer: "Tetap di tempat", pembahasan: "Menunggu giliran pada posisi/tempat yang ditentukan adalah bagian dari ketaatan pada aturan estafet." },
            { q: "Giliran temanmu melempar bola ke dalam keranjang, ternyata tidak masuk. Apa yang kamu ucapkan?", options: ["Ejek dia kalah", "Beri dia semangat", "Suruh dia pulang"], answer: "Beri dia semangat", pembahasan: "Memberi dukungan atau semangat kepada teman yang gagal adalah wujud sikap baik, empati, dan suportif." },
            { q: "Mengapa kita harus bergiliran saat memakai alat senam lantai di sekolah?", options: ["Agar alat rusak", "Agar semua kebagian", "Agar guru marah"], answer: "Agar semua kebagian", pembahasan: "Alat olahraga adalah milik sekolah dan hak bersama, jadi semua siswa berhak memakainya secara bergantian." },
            
            // Bekerja Sama Kelompok
            { q: "Kelompokmu kalah dalam lomba bakiak karena ada satu teman yang terjatuh. Sikapmu sebaiknya?", options: ["Bantu teman bangun", "Marahi teman itu", "Tinggal teman itu"], answer: "Bantu teman bangun", pembahasan: "Kalah menang adalah hal biasa. Yang utama adalah kekompakan tim dan peduli pada keselamatan teman." },
            { q: "Dalam lomba bakiak beregu, seluruh kelompok harus berjalan bersama. Apa kunci agar kelompok tidak jatuh?", options: ["Jalan paling cepat", "Samakan langkah kaki", "Tarik kaki teman"], answer: "Samakan langkah kaki", pembahasan: "Menyamakan langkah membutuhkan komunikasi aktif, rasa seirama, dan kerjasama yang baik antar anggota." },
            { q: "Teman satu tim sepak bolamu sedang dihadang lawan. Posisimu sedang bebas dari lawan. Sebaiknya kamu...", options: ["Minta teman oper", "Diam lihat teman", "Lari ke pinggir"], answer: "Minta teman oper", pembahasan: "Sepak bola adalah permainan kelompok. Kita harus saling membuka ruang dan membantu teman agar bisa mencetak gol." },
            { q: "Kerjasama yang baik dan tulus akan membuat tugas membereskan alat olahraga yang berat menjadi terasa...", options: ["Sangat sulit sekali", "Makin lama selesai", "Lebih cepat selesai"], answer: "Lebih cepat selesai", pembahasan: "Bekerja sama atau bergotong royong meringankan beban karena pekerjaan dibagi ke banyak orang sekaligus." },
            { q: "Regu piket kelas sedang merapikan matras dan bola. Kamu kebagian tugas membawa bola. Kamu harus...", options: ["Buang bola jauh", "Taruh bola rapi", "Bawa bola pulang"], answer: "Taruh bola rapi", pembahasan: "Mengerjakan bagian tugas kita sendiri dengan tuntas adalah bentuk rasa tanggung jawab dalam kerja sama." },
            
            // Ayo Uji Kemampuan & Ayo Tambah Pengetahuan
            { q: "Permainan menjala ikan menuntut kekompakan tinggi. Siswa yang berperan menjadi jaring jala harus...", options: ["Lepas gandengan tangan", "Pegang tangan kuat", "Lari sendiri sendiri"], answer: "Pegang tangan kuat", pembahasan: "Jala tidak boleh terputus agar perangkap terbentuk kuat dan bisa menangkap 'ikan' dengan bersama-sama." },
            { q: "Dalam permainan tradisional bentengan, agar mendapat poin dan menang, anggota kelompokmu harus bisa...", options: ["Sentuh tiang lawan", "Sembunyi paling jauh", "Pukul badan lawan"], answer: "Sentuh tiang lawan", pembahasan: "Menyentuh benteng (tiang/pohon) milik lawan tanpa lebih dulu tertangkap adalah cara mutlak memenangkan bentengan." },
            { q: "Permainan oper bola beranting dapat melatih otot tubuh kita jika gerakannya dilakukan dengan...", options: ["Lewat atas kepala", "Lempar sangat keras", "Tendang bola jauh"], answer: "Lewat atas kepala", pembahasan: "Mengoper bola meliuk dari atas kepala atau celah kaki secara berantai akan melatih kelenturan otot pinggang dan punggung." },
            { q: "Lari zigzag melewati rintangan untuk memindahkan bendera dirancang untuk melatih kita agar bisa lari dengan arah...", options: ["Mundur ke belakang", "Belok kiri kanan", "Lurus ke depan"], answer: "Belok kiri kanan", pembahasan: "Lari berkelok-kelok (zigzag) sangat efektif untuk mengasah kelincahan motorik dalam merubah arah gerak tubuh secara cepat." },
            { q: "Dalam permainan elang dan anak ayam. Anak yang menjadi induk ayam bertugas untuk mempraktikkan perlindungan. Melindungi dari apa?", options: ["Tangkap burung elang", "Lindungi dari elang", "Makan bersama elang"], answer: "Lindungi dari elang", pembahasan: "Induk ayam harus merentangkan tangan dan bergerak lincah menutupi dan melindungi anak-anaknya dari buruan elang." },
            
            // Ayo Berefleksi
            { q: "Setelah selesai berolahraga dan bermain bersama teman, badan terasa berkeringat, namun perasaan di hati pasti...", options: ["Jadi sangat sedih", "Jadi sangat senang", "Jadi sangat marah"], answer: "Jadi sangat senang", pembahasan: "Bergerak bebas, berolahraga, dan tertawa bermain bersama teman akan melepaskan hormon bahagia dalam tubuh kita." },
            { q: "Jika kamu terus-terusan bersifat egois dan ingin menang sendiri saat bermain bersama, maka akibat kedepannya adalah...", options: ["Dapat banyak hadiah", "Teman jadi menjauh", "Menang terus menerus"], answer: "Teman jadi menjauh", pembahasan: "Sifat egois membuat orang lain merasa dirugikan dan tidak nyaman, sehingga pelan-pelan kita akan dijauhi teman." },
            { q: "Hari ini kita belajar banyak dari bermain bersama. Hal paling berharga yang kita latih dari pembelajaran hari ini adalah...", options: ["Belajar sikap adil", "Dapat nilai seratus", "Bawa pulang bola"], answer: "Belajar sikap adil", pembahasan: "Tujuan utama PJOK bukan semata-mata skor akhir, melainkan pembentukan karakter disiplin, mandiri, kerja sama, dan bersikap adil." },
            { q: "Saat mengalami kekalahan saat bermain, refleksi diri atau pelajaran positif yang bisa kita ambil sebagai kelompok adalah...", options: ["Harus terus curang", "Harus lebih kompak", "Harus berhenti main"], answer: "Harus lebih kompak", pembahasan: "Kekalahan harus dijadikan alat evaluasi diri agar besok kelompok berlatih lebih rajin dan menyusun kerja sama yang lebih solid." },
            { q: "Sebelum memulai dan sesudah usai bermain olahraga, hal yang paling wajib dan penting yang harus kita lakukan secara berkelompok adalah...", options: ["Makan minum banyak", "Doa secara bersama", "Tidur dan istirahat"], answer: "Doa secara bersama", pembahasan: "Berdoa memohon perlindungan sebelum kegiatan, dan mengucap rasa syukur yang tulus karena permainan telah berjalan dengan selamat." }
        ];

        // Mengubah kunci penyimpanan agar unik dan tidak bentrok dengan soal lain
        const storageKey = 'history_PJOK_K1_S2_B4_HOTS';

        // Status & Variabel Aplikasi
        let currentQuestionIndex = 0;
        let score = 0;
        let userProfile = { nama: "", kelas: "" };
        let userAnswers = {}; 

        // Utilitas untuk mengacak array (Fisher-Yates)
        function shuffleArray(array) {
            let shuffled = array.slice();
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Tampilkan Riwayat saat halaman dimuat
        window.onload = function() {
            loadHistory();
        };

        function loadHistory() {
            const historyBody = document.getElementById("history-body");
            historyBody.innerHTML = "";
            let historyData = JSON.parse(localStorage.getItem(storageKey)) || [];
            
            if (historyData.length === 0) {
                historyBody.innerHTML = "<tr><td colspan='4' class='text-center'>Belum ada riwayat. Jadilah yang pertama!</td></tr>";
                return;
            }

            // Tampilkan dari yang terbaru
            historyData.reverse().forEach(data => {
                const tr = document.createElement("tr");
                tr.innerHTML = `
                    <td>${data.time}</td>
                    <td>${data.nama}</td>
                    <td>${data.kelas}</td>
                    <td><strong style="color:var(--correct)">${data.skor}</strong></td>
                `;
                historyBody.appendChild(tr);
            });
        }

        function startQuiz() {
            const nama = document.getElementById("namaLengkap").value.trim();
            const kelas = document.getElementById("kelas").value.trim();

            if (nama === "" || kelas === "") {
                alert("Silakan isi Nama Lengkap dan Kelas terlebih dahulu!");
                return;
            }

            userProfile.nama = nama;
            userProfile.kelas = kelas;
            
            document.getElementById("login-screen").classList.add("hidden");
            document.getElementById("quiz-screen").classList.remove("hidden");
            
            renderQuestion();
        }

        function renderQuestion() {
            const qData = questionsData[currentQuestionIndex];
            
            // Update Header info
            document.getElementById("q-counter").innerText = `Soal ${currentQuestionIndex + 1} / ${questionsData.length}`;
            document.getElementById("current-score").innerText = score;
            
            // Update Soal
            document.getElementById("question-text").innerText = qData.q;
            
            // Persiapan Kontainer Opsi dan Pembahasan
            const optionsContainer = document.getElementById("options-container");
            optionsContainer.innerHTML = "";
            const pembahasanBox = document.getElementById("pembahasan-container");
            pembahasanBox.style.display = "none";
            document.getElementById("pembahasan-text").innerText = qData.pembahasan;

            // Acak posisi jawaban setiap kali render
            const shuffledOptions = shuffleArray(qData.options);

            // Cek apakah soal ini sudah pernah dijawab sebelumnya
            const previousAnswer = userAnswers[currentQuestionIndex];

            shuffledOptions.forEach(optText => {
                const btn = document.createElement("button");
                btn.className = "option-btn";
                btn.innerText = optText;
                
                // Jika sudah pernah dijawab
                if (previousAnswer) {
                    btn.disabled = true;
                    if (optText === qData.answer) {
                        btn.classList.add("correct");
                    } else if (optText === previousAnswer.choice && !previousAnswer.isCorrect) {
                        btn.classList.add("wrong");
                    }
                } else {
                    // Jika belum dijawab
                    btn.onclick = () => selectAnswer(btn, optText, qData.answer);
                }

                optionsContainer.appendChild(btn);
            });

            // Tampilkan pembahasan dan buka tombol Next jika sudah pernah dijawab
            if (previousAnswer) {
                pembahasanBox.style.display = "block";
                document.getElementById("btn-next").disabled = false;
            } else {
                document.getElementById("btn-next").disabled = true;
            }

            // Atur tombol prev
            document.getElementById("btn-prev").disabled = (currentQuestionIndex === 0);
        }

        function selectAnswer(selectedBtn, selectedText, correctText) {
            const isCorrect = (selectedText === correctText);
            
            // Nonaktifkan semua tombol di soal ini
            const allBtns = document.querySelectorAll(".option-btn");
            allBtns.forEach(btn => {
                btn.disabled = true;
                if (btn.innerText === correctText) {
                    btn.classList.add("correct");
                }
            });

            // Jika salah, tandai merah tombol yang dipilih
            if (!isCorrect) {
                selectedBtn.classList.add("wrong");
            } else {
                // Kalkulasi poin: 100 / jumlah soal
                const pointPerSoal = 100 / questionsData.length;
                score += pointPerSoal;
                document.getElementById("current-score").innerText = score;
                document.getElementById("current-score").style.color = "var(--correct)";
            }

            // Simpan riwayat jawaban
            userAnswers[currentQuestionIndex] = {
                choice: selectedText,
                isCorrect: isCorrect
            };

            // Tampilkan pembahasan
            document.getElementById("pembahasan-container").style.display = "block";
            
            // Aktifkan tombol Next
            document.getElementById("btn-next").disabled = false;
        }

        function prevQuestion() {
            if (currentQuestionIndex > 0) {
                currentQuestionIndex--;
                renderQuestion();
            }
        }

        function nextQuestion() {
            if (currentQuestionIndex < questionsData.length - 1) {
                currentQuestionIndex++;
                renderQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            document.getElementById("quiz-screen").classList.add("hidden");
            document.getElementById("result-screen").classList.remove("hidden");
            
            document.getElementById("result-name").innerText = `${userProfile.nama} (${userProfile.kelas})`;
            document.getElementById("final-score").innerText = Math.round(score);

            // Simpan ke LocalStorage History
            let historyData = JSON.parse(localStorage.getItem(storageKey)) || [];
            
            const now = new Date();
            const timeString = `${now.getDate()}/${now.getMonth()+1}/${now.getFullYear()} ${now.getHours()}:${now.getMinutes()}`;

            historyData.push({
                time: timeString,
                nama: userProfile.nama,
                kelas: userProfile.kelas,
                skor: Math.round(score)
            });

            localStorage.setItem(storageKey, JSON.stringify(historyData));
        }
    </script>
</body>
</html>